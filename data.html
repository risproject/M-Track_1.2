<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>M-Track</title>

    <!-- Framework & icon -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <!-- css -->
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/style.css">

    <!-- Javascript -->
    <script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.rawgit.com/Keyang/node-csvtojson/d41f44aa/browser/csvtojson.min.js"></script>

  </head>
  <body>

    <section id="head" class="navbar">
        <div class="container">
          <div class="col-auto">
            <img src="aset/F-S.png" class="rounded-circle" width="35px" height="35px" alt=""> 
          </div>
          <a href="#primarybtn">Primary</a>
          <a href="#sprimarybtn">Semi-Primary</a>
          <a class="pe-2" href="#secondarybtn">Secondary</a>
        </div>
    </section>

    <section id="main">
        <div class="container pb-5">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-7">
                    <span id="total">Total :</span>
                  </div>
                  <div class="col-5">
                    <span>Date :</span>
                    <h4 id="tanggalwaktu"></h4>
                  </div>
                </div>
              </div>  
            </div>
            <div class="card bg-p-blue" id="primarybtn">
                <div class="card-body">
                  <h5 class="card-title">Primary</h5>
                  <div class="progress" id="pPrimary"></div>
                  <div class="row">
                    <div class="col-6">
                        <h6 class="card-subtitle mt-2">Used :</h6>
                        <span id="primary"></span>
                    </div>
                    <div class="col-6">
                        <h6 class="card-subtitle mt-2">Limit :</h6>
                        <h4 class="card-title">Rp. 550.000</h4>
                    </div>
                  </div>
                </div>
            </div>  

            <div class="card bg-p-green mt-3" id="sprimarybtn">
                <div class="card-body">
                  <h5 class="card-title">Semi-Primary</h5>
                  <div class="progress" id="pSemiPrimary"></div>
                  <div class="row">
                    <div class="col-6">
                        <h6 class="card-subtitle mt-2">Used :</h6>
                        <span id="semi-primary"></span>
                    </div>
                    <div class="col-6">
                        <h6 class="card-subtitle mt-2">Limit :</h6>
                        <h4 class="card-title">Rp. 250.000</h4>
                    </div>
                  </div>
                  <div id="mainContent"></div>
                </div>
            </div>

            <div class="card bg-p-red mt-3 mb-5" id="secondarybtn">
              <div class="card-body">
                <h5 class="card-title">Secondary</h5>
                <div class="progress" id="pSecondary"></div>
                <div class="row">
                  <div class="col-6">
                      <h6 class="card-subtitle mt-2">Used :</h6>
                      <span id="secondary"></span>
                  </div>
                  <div class="col-6">
                      <h6 class="card-subtitle mt-2">Limit :</h6>
                      <h4 class="card-title">Rp. 150.000</h4>
                  </div>
                </div>
                <div id="mainContentSc"></div>
              </div>
            </div>

        </div>
    </section>
    
    <!-- bottom Navbar -->
    <nav class="navbar fixed-bottom">
        <div class="container">
            <div class="container">
                <div class="row justify-content-center">
                    <a href="index.html" class="col-3 col-md text-center nav-menu">
                        <button class="btn btn-light nav-icon my-auto">
                            <i class="bi bi-house"></i>
                        </button>
                        <p class="nav-label">Home</p>
                    </a>
                    <a href="data.html" class="col-3 col-md text-center nav-menu active">
                        <button class="btn btn-light nav-icon my-auto">
                            <i class="bi bi-clipboard2-data"></i>
                        </button>
                        <p class="nav-label">Data</p>
                    </a>
                    <a href="inventory.html" class="col-3 col-md text-center nav-menu">
                        <button class="btn btn-light nav-icon my-auto">
                            <i class="bi bi-inboxes"></i>
                        </button>
                        <p class="nav-label">Inventory</p>
                    </a>
                    <a href="list.html" class="col-3 col-md text-center nav-menu">
                        <button class="btn btn-light nav-icon my-auto">
                            <i class="bi bi-collection"></i>
                        </button>
                        <p class="nav-label">List</p>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>

    <!-- sheet display data primary -->
    <script>
      const URL1 = "https://docs.google.com/spreadsheets/d/1gHPzPHgpKcDW-5SayuVdHp8Y2eUqhP1h4AoNWq72uvw/export?format=csv"
      const primary = document.querySelector("#primary");
      const semiPrimary = document.querySelector("#semi-primary");
      const secondary = document.querySelector("#secondary");
      const total = document.querySelector("#total");

      const pPrimary = document.querySelector("#pPrimary");

      // lakukan fetch terhadap url
      fetch(URL1).then(result => result.text()).then(function (csvtext) {
          return csv().fromString(csvtext);
      }).then(function (csv) {
          csv.forEach(function (row) {
              primary.innerHTML += "<h4>"+ row.totalPrimary + "</h4>";
              semiPrimary.innerHTML += "<h4>" + row.totalSemiPrimary + "</h4>";
              secondary.innerHTML += "<h4>" + row.totalSecondary + "</h4>";
              total.innerHTML += "<h4>" + row.total + "</h4>";

              pPrimary.innerHTML += "<div class='progress-bar' role='progressbar' aria-label='Basic example' style='width: "+ row.PtotalPrimary +"'> "+ row.PtotalPrimary +" </div>";
              pSemiPrimary.innerHTML += "<div class='progress-bar' role='progressbar' aria-label='Basic example' style='width: "+ row.PtotalSemiPrimary +"'> "+ row.PtotalSemiPrimary +" </div>";
              pSecondary.innerHTML += "<div class='progress-bar' role='progressbar' aria-label='Basic example' style='width: "+ row.PtotalSecondary +"'> "+ row.PtotalSecondary +" </div>";
          });
      });
    </script>
    <!-- akhir sheet display data primary -->

    <!-- Sheet Display 2-->
    <script>
      const URLsp = "https://docs.google.com/spreadsheets/d/1J6LIwdhSUmZWiUTDFu3YwCk1XfibSoFHM2AoK2nQnyc/export?format=csv"
      const mainContent = document.querySelector("#mainContent");

      // lakukan fetch terhadap urlsp
      fetch(URLsp).then(result => result.text()).then(function (csvtext) {
          return csv().fromString(csvtext);
      }).then(function (csv) {
          csv.forEach(function (row) {

              // membuat row
              mainContent.classList.add("row")

              // membuat kolom
              var div = document.createElement("div");
              div.classList.add("col-md-3");
              div.classList.add("mt-2");

              // membuat kartu
              var span = document.createElement("span");
              span.classList.add("card");

              // membuat kartu
              var main = document.createElement("main");
              main.classList.add("card-body");

              main.innerHTML += "<h5>Item : " + row.keteranganSemiPrimary + "</h5>";
              main.innerHTML += "<li>Harga : " + row.semiPrimary + "</li>";
              main.innerHTML += "<li>Tanggal : " + row.timestamp + "</li>";

              mainContent.appendChild(div);
              div.appendChild(span);
              span.appendChild(main);
          });
      });
    </script>
    <!-- Akhir sheet display 2-->

    <!-- Sheet Display 3-->
    <script>
      const URLsc = "https://docs.google.com/spreadsheets/d/1N-LjML4Nmn9KCImL5hEhm-VXPtgqx0XJxUeDwfxrjeY/export?format=csv"
      const mainContentSc = document.querySelector("#mainContentSc");

      // lakukan fetch terhadap urlsp
      fetch(URLsc).then(result => result.text()).then(function (csvtext) {
          return csv().fromString(csvtext);
      }).then(function (csv) {
          csv.forEach(function (row) {

              // membuat row
              mainContentSc.classList.add("row")

              // membuat kolom
              var div = document.createElement("div");
              div.classList.add("col-md-3");
              div.classList.add("mt-2");

              // membuat kartu
              var span = document.createElement("span");
              span.classList.add("card");

              // membuat kartu
              var main = document.createElement("main");
              main.classList.add("card-body");

              main.innerHTML += "<h5>Item : " + row.keteranganSecondary + "</h5>";
              main.innerHTML += "<li>Harga : " + row.secondary + "</li>";
              main.innerHTML += "<li>Tanggal : " + row.timestamp + "</li>";

              mainContentSc.appendChild(div);
              div.appendChild(span);
              span.appendChild(main);
          });
      });
    </script>
    <!-- Akhir sheet display 3-->

    <script>
        var dt = new Date();
        document.getElementById("tanggalwaktu").innerHTML = (("0"+dt.getDate()).slice(-2)) +"/"+ (("0"+(dt.getMonth()+1)).slice(-2)) +"/"+ (dt.getFullYear()) +" ";
    </script>

  </body>
</html>
